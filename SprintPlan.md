# Unity Roguelike Demo - 初期冲刺计划与任务清单

**版本**：v0.1  
**更新日期**：2025-01-XX  
**项目周期**：4周（8个冲刺任务）

> 本计划基于《SystemDesign.md》和当前代码库现状制定

---

## 📋 项目现状分析

### ✅ 已完成模块
- **玩家控制模块**：基础移动、跳跃系统（含缓冲与土狼时间）、墙体检测
- **敌人AI模块**：巡逻、追击、攻击逻辑、墙检测与风击退处理
- **攻击系统**：近战/元素攻击、伤害计算、元素效果（火/风/冰/雷）
- **技能系统框架**：BaseSkill基础类、SM_SkillSystem技能枢纽、MP系统
- **UI模块基础**：血条控制器、暂停菜单框架
- **掉落系统框架**：LootTable ScriptableObject

### ⚠️ 待完善功能
- 玩家/敌人死亡处理不完整
- UI与游戏逻辑尚未完全集成
- 技能释放与投射体系统需要完善
- 地图场景构建与碰撞优化
- 掉落物品拾取与背包系统
- 存档系统未实现

---

## 🎯 冲刺任务概览

### Sprint 1：玩家核心功能完善 ⏱️ 3天
**目标**：完善玩家移动、跳跃与战斗系统集成，确保核心操控流畅

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| P-001 | 玩家死亡状态处理：禁用控制、播放死亡动画、触发重生机制 | 高 | 4h | 待开始 |
| P-002 | Attack组件与PlayerController集成：J键触发攻击、武器动画同步 | 高 | 3h | 待开始 |
| P-003 | 动画系统集成：Animator参数同步（Speed/Jump/Ground/Attack） | 中 | 3h | 待开始 |
| P-004 | 物理材质优化：零摩擦材质应用与移动手感调优 | 低 | 2h | 待开始 |
| P-005 | 玩家受击处理：击退效果、无敌帧、受击动画 | 中 | 4h | 待开始 |

**验收标准**：
- 玩家可流畅移动、跳跃、攻击
- 死亡后正确禁用控制
- 攻击动画与判定同步
- 受击反馈明显

---

### Sprint 2：敌人AI增强 ⏱️ 3天
**目标**：优化敌人行为逻辑，完善掉落系统与死亡处理

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| E-001 | 敌人死亡处理：禁用AI、播放死亡动画、清理资源 | 高 | 3h | 待开始 |
| E-002 | EnemyDrop集成：死亡触发掉落、LootTable配置 | 高 | 2h | 待开始 |
| E-003 | 敌人伤害处理：击退抗性、状态恢复机制 | 中 | 3h | 待开始 |
| E-004 | AI行为优化：追击停止距离、攻击前摇与后摇 | 中 | 3h | 待开始 |
| E-005 | 敌人类型多样化：设计2-3种不同类型的敌人（近战/远程） | 低 | 4h | 待开始 |

**验收标准**：
- 敌人死亡正确掉落物品
- 风击退不穿透墙壁
- 敌人AI行为自然流畅
- 至少2种敌人类型可玩

---

### Sprint 3：战斗系统完善 ⏱️ 3天
**目标**：优化攻击判定、元素效果平衡与战斗反馈

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| C-001 | 攻击判定优化：攻击盒大小调整、命中特效 | 高 | 2h | 待开始 |
| C-002 | 元素效果平衡：火焰伤害、冰冻时长、雷链范围调优 | 中 | 3h | 待开始 |
| C-003 | 暴击系统完善：暴击率/暴伤平衡、暴击视觉反馈 | 中 | 2h | 待开始 |
| C-004 | 伤害数字显示：浮动伤害数字、暴击特效 | 低 | 4h | 待开始 |
| C-005 | 防御减伤公式优化：确保平衡性 | 低 | 1h | 待开始 |

**验收标准**：
- 攻击判定准确无穿模
- 元素效果数值合理
- 战斗反馈清晰明确

---

### Sprint 4：技能系统集成 ⏱️ 4天
**目标**：完善技能释放管线、投射体系统与技能平衡

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| S-001 | 技能投射体系统：Fireball/IceSpike投射与碰撞处理 | 高 | 4h | 待开始 |
| S-002 | 近战技能实现：DashStab/WhirlwindSlash完成 | 高 | 3h | 待开始 |
| S-003 | 技能冷却UI：技能图标、冷却环、MP消耗显示 | 中 | 3h | 待开始 |
| S-004 | 技能事件集成：SkillEventBus完善、UI响应技能事件 | 中 | 2h | 待开始 |
| S-005 | 对象池实现：投射体、特效对象池以减少GC | 低 | 4h | 待开始 |
| S-006 | 技能平衡调整：CD/消耗/伤害数值调优 | 中 | 2h | 待开始 |

**验收标准**：
- 所有技能可正常释放
- 投射体碰撞正确
- 技能UI实时更新
- 性能稳定无卡顿

---

### Sprint 5：UI系统建设 ⏱️ 3天
**目标**：完成游戏内UI界面，提供完整的用户体验

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| U-001 | 血条系统集成：Attribute.OnHealthChanged绑定、实时更新 | 高 | 2h | 待开始 |
| U-002 | MP条UI：SM_SkillSystem事件绑定、MP消耗/回复显示 | 高 | 2h | 待开始 |
| U-003 | 技能栏UI：4个技能槽位、按键提示、冷却进度 | 高 | 3h | 待开始 |
| U-004 | 暂停菜单完善：ESC键触发、返回主菜单功能 | 中 | 2h | 待开始 |
| U-005 | 背包UI基础：物品槽位、物品Icon显示 | 中 | 3h | 待开始 |
| U-006 | 死亡UI：死亡提示、重生倒计时、返回主菜单 | 低 | 2h | 待开始 |

**验收标准**：
- 所有UI元素实时更新
- 暂停菜单功能完整
- 用户界面美观简洁

---

### Sprint 6：地图与场景管理 ⏱️ 3天
**目标**：构建可玩地图，实现场景切换与碰撞优化

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| M-001 | Tilemap地图构建：使用cave_tileset构建可玩场景 | 高 | 4h | 待开始 |
| M-002 | 碰撞层优化：Ground/Player/Enemy层配置 | 高 | 2h | 待开始 |
| M-003 | 场景切换实现：StartMenuScene → MainScenes → SaveScenes | 中 | 2h | 待开始 |
| M-004 | 敌人生成点：配置敌人Spawner、敌人分布 | 中 | 2h | 待开始 |
| M-005 | 地图边界与摄像机跟随：相机跟随玩家、边界限制 | 中 | 3h | 待开始 |
| M-006 | 地图装饰：环境对象、背景层优化 | 低 | 2h | 待开始 |

**验收标准**：
- 地图可流畅游玩
- 场景切换正常
- 碰撞检测准确

---

### Sprint 7：掉落与物品系统 ⏱️ 3天
**目标**：实现物品拾取、背包基础功能

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| I-001 | 物品拾取检测：碰撞触发器、拾取范围 | 高 | 2h | 待开始 |
| I-002 | 背包系统：物品数据结构、添加/移除逻辑 | 高 | 3h | 待开始 |
| I-003 | 物品类型定义：消耗品/装备/材料分类 | 中 | 2h | 待开始 |
| I-004 | 物品效果系统：基础物品效果接口 | 中 | 3h | 待开始 |
| I-005 | 装备系统雏形：武器/护甲装备槽位 | 低 | 4h | 待开始 |
| I-006 | 物品UI完善：背包界面、物品详情显示 | 中 | 2h | 待开始 |

**验收标准**：
- 可拾取掉落物品
- 背包功能正常
- 基础物品系统可用

---

### Sprint 8：调试与平衡性测试 ⏱️ 3天
**目标**：全系统联调、数值平衡与体验优化

| 任务ID | 任务描述 | 优先级 | 预估工时 | 状态 |
|--------|----------|--------|----------|------|
| T-001 | 全系统集成测试：完整游戏流程测试 | 高 | 3h | 待开始 |
| T-002 | 数值平衡调整：伤害/防御/技能数值调优 | 高 | 4h | 待开始 |
| T-003 | Bug修复：关键bug修复 | 高 | 4h | 待开始 |
| T-004 | 性能优化：GC优化、帧率优化 | 中 | 3h | 待开始 |
| T-005 | 体验优化：手感调优、反馈增强 | 中 | 3h | 待开始 |
| T-006 | 文档完善：README更新、开发文档补充 | 低 | 2h | 待开始 |

**验收标准**：
- 游戏可完整通关
- 数值平衡合理
- 无明显严重bug
- 性能稳定60FPS

---

## 📊 项目管理建议

### 优先级说明
- **高**：核心功能，必须实现
- **中**：重要功能，建议实现
- **低**：锦上添花，可选实现

### 工时估算
- 总工时预估：**70小时**
- 建议每日开发时间：**4-6小时**
- 建议项目周期：**4周（20个工作日）**

### 风险评估

| 风险项 | 风险等级 | 缓解措施 |
|--------|----------|----------|
| 技能系统复杂度超预期 | 中 | 先实现核心技能，复杂效果延后 |
| 数值平衡耗时过长 | 中 | 建立数值表格，迭代调整 |
| UI集成工作量较大 | 低 | 使用Unity UI框架，简化设计 |
| 性能优化难度 | 低 | 对象池+合理GC策略 |

---

## 🔄 迭代建议

### Phase 1：核心玩法验证（Sprint 1-3）
**目标**：快速实现可玩的MVP版本，验证核心战斗循环

### Phase 2：功能完善（Sprint 4-7）
**目标**：充实游戏内容，完善用户体验

### Phase 3：打磨优化（Sprint 8）
**目标**：品质提升，准备发布

---

## 📝 实施建议

1. **每日站会**：每天开始前回顾前日进度，明确今日目标
2. **快速迭代**：每个Sprint完成后立即测试，发现问题及时调整
3. **版本控制**：每完成一个Sprint提交一次，保持代码整洁
4. **文档同步**：系统设计文档随开发进度更新

---

## ✅ 下一步行动

1. 确认该冲刺计划是否符合预期
2. 从 Sprint 1 开始实施
3. 每周回顾进度，必要时调整计划

**祝开发顺利！**

